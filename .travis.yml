language: python
python:
  - "3.6"
  - "3.7"
env:
  - JOB=test SUITE=unit
  - JOB=test SUITE=system

# - perform pre-commit checks only once
# - perform doc build only on commit to develop or master
jobs:
  include:
  - env: JOB=check
  - env: JOB=deploy
    if: (branch = master OR branch = develop OR branch = ci_script_check) AND NOT env($TRAVIS_PULL_REQUEST)

install:
  - ./ci_scripts/install.sh
script:
  - ./ci_scripts/script.sh
after_success:
 - ./ci_scripts/after_success.sh

deploy:
  provider: pages
  local_dir: docs/$TRAVIS_BRANCH
  edge: true
  token: $GITHUB_TOKEN
  on:
    condition: $JOB = deploy
